<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Beta test training words</title>
	<link rel="stylesheet" href="css/style.css">
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<header id="header">
		<h1>Learn new words!</h1>
	</header>

	<section id="main">
		<button onclick="start_game()">Start</button>	
	</section>

	<section id="game">
		<p id="task">Translate this word:</p>
		<p id="word">word</p>
		<form action="#" autocomplete="off">
			<input type="text" id="us_answer">
			<button onclick="game_handle()">next</button>
		</form>
	</section>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script type="text/javascript">
		let coll = new Map();
		
		//Data section
		var words = ["absorb", "bell", "belt", "cable", "cancer", "cap"];
		coll.set('absorb', 'всасывать');
		coll.set('bell', 'колокол');
		coll.set('belt', 'пояс');
		coll.set('cable', 'кабель');
		coll.set('cancer', 'рак');
		coll.set('cap', 'кепка');
		//Data section

		var counter = -1;
		var error = false;
		var start = words;

		function compareRandom(a, b) {
			return Math.random() - 0.5;
		}

		function start_game() {
			document.getElementById("header").style.display = "none";
			document.getElementById("main").style.display = "none";
			$("#game").fadeIn(1000);


			//words.sort(compareRandom);
			set_word();
		}



		function game_handle() {
			//handle mistakes
			if(error) {
				error = false;
				counter++;
				set_word();
			}
			else {
				var answer = document.getElementById("us_answer").value;
				if(answer != coll.get(words[counter])) {
					//alert("false");
					error = true;
					words.push(words[counter]);
					document.getElementById("us_answer").value = coll.get(words[counter]);
					document.getElementById("us_answer").style.background = "#D63C3C";
					document.getElementById("us_answer").style.border = "1px solid #D63C3C";
					document.getElementById("us_answer").style.color = "#fff";
				} else {
					//alert(answer);
					document.getElementById("us_answer").style.background = "#57CE79";
					document.getElementById("us_answer").style.border = "1px solid #57CE79";
					document.getElementById("us_answer").style.color = "#fff";

					setTimeout(function () {
			        counter++;
							set_word();
			    }, 1500);
					
				}
			}
		}




		function set_word() {
			//Restart game
			if(words[counter] == null) {
				//alert("restart");
				counter = 0;
				words = start;
				words.sort(compareRandom);
			} 

			document.getElementById("word").innerHTML = words[counter];
			document.getElementById("us_answer").style.background = "none";
			document.getElementById("us_answer").style.border = "1px solid black";
			document.getElementById("us_answer").style.color = "black";
			document.getElementById("us_answer").value = "";
		}
	</script>
	<script type="text/javascript">
		//Animation appear
		$("#header").fadeIn(800);
		$("#main").fadeIn(1000);
	</script>
</body>
</html>


